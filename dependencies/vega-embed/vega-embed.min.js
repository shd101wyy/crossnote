!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vega-lib"),require("vega-lite")):"function"==typeof define&&define.amd?define(["vega-lib","vega-lite"],t):e.vegaEmbed=t(e.vega,e.vl)}(this,function(e,t){"use strict";var n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function r(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var i="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function s(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),o.hasOwnProperty(t)?{space:o[t],local:e}:e}function a(e){var t=s(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===i&&t.documentElement.namespaceURI===i?t.createElement(e):t.createElementNS(n,e)}})(t)}function u(){}function c(e){return null==e?u:function(){return this.querySelector(e)}}function l(){return[]}var h=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var f=document.documentElement;if(!f.matches){var p=f.webkitMatchesSelector||f.msMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector;h=function(e){return function(){return p.call(this,e)}}}}var v=h;function d(e){return new Array(e.length)}function m(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}m.prototype={constructor:m,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var g="$";function y(e,t,n,r,i,o){for(var s,a=0,u=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new m(e,o[a]);for(;a<u;++a)(s=t[a])&&(i[a]=s)}function w(e,t,n,r,i,o,s){var a,u,c,l={},h=t.length,f=o.length,p=new Array(h);for(a=0;a<h;++a)(u=t[a])&&(p[a]=c=g+s.call(u,u.__data__,a,t),c in l?i[a]=u:l[c]=u);for(a=0;a<f;++a)(u=l[c=g+s.call(e,o[a],a,o)])?(r[a]=u,u.__data__=o[a],l[c]=null):n[a]=new m(e,o[a]);for(a=0;a<h;++a)(u=t[a])&&l[p[a]]===u&&(i[a]=u)}function _(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function b(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function x(e){return e.trim().split(/^|\s+/)}function E(e){return e.classList||new S(e)}function S(e){this._node=e,this._names=x(e.getAttribute("class")||"")}function j(e,t){for(var n=E(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function A(e,t){for(var n=E(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function k(){this.textContent=""}function O(){this.innerHTML=""}function N(){this.nextSibling&&this.parentNode.appendChild(this)}function T(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $(){return null}function C(){var e=this.parentNode;e&&e.removeChild(this)}function I(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function R(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}S.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var L={},M=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(L={mouseenter:"mouseover",mouseleave:"mouseout"}));function V(e,t,n){return e=P(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function P(e,t,n){return function(r){var i=M;M=r;try{e.call(this,this.__data__,t,n)}finally{M=i}}}function z(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function D(e,t,n){var r=L.hasOwnProperty(e.type)?V:P;return function(i,o,s){var a,u=this.__on,c=r(t,o,s);if(u)for(var l=0,h=u.length;l<h;++l)if((a=u[l]).type===e.type&&a.name===e.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=n),void(a.value=t);this.addEventListener(e.type,c,n),a={type:e.type,name:e.name,value:t,listener:c,capture:n},u?u.push(a):this.__on=[a]}}function q(e,t,n){var r=b(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}var B=[null];function J(e,t){this._groups=e,this._parents=t}J.prototype=function(){return new J([[document.documentElement]],B)}.prototype={constructor:J,select:function(e){"function"!=typeof e&&(e=c(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=t[i],u=a.length,l=r[i]=new Array(u),h=0;h<u;++h)(o=a[h])&&(s=e.call(o,o.__data__,h,a))&&("__data__"in o&&(s.__data__=o.__data__),l[h]=s);return new J(r,this._parents)},selectAll:function(e){var t;"function"!=typeof e&&(e=null==(t=e)?l:function(){return this.querySelectorAll(t)});for(var n=this._groups,r=n.length,i=[],o=[],s=0;s<r;++s)for(var a,u=n[s],c=u.length,h=0;h<c;++h)(a=u[h])&&(i.push(e.call(a,a.__data__,h,u)),o.push(a));return new J(i,o)},filter:function(e){"function"!=typeof e&&(e=v(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,u=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&u.push(o);return new J(r,this._parents)},data:function(e,t){if(!e)return v=new Array(this.size()),l=-1,this.each(function(e){v[++l]=e}),v;var n,r=t?w:y,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var s=o.length,a=new Array(s),u=new Array(s),c=new Array(s),l=0;l<s;++l){var h=i[l],f=o[l],p=f.length,v=e.call(h,h&&h.__data__,l,i),d=v.length,m=u[l]=new Array(d),g=a[l]=new Array(d);r(h,f,m,g,c[l]=new Array(p),v,t);for(var _,b,x=0,E=0;x<d;++x)if(_=m[x]){for(x>=E&&(E=x+1);!(b=g[E])&&++E<d;);_._next=b||null}}return(a=new J(a,i))._enter=u,a._exit=c,a},enter:function(){return new J(this._enter||this._groups.map(d),this._parents)},exit:function(){return new J(this._exit||this._groups.map(d),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u,c=t[a],l=n[a],h=c.length,f=s[a]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;a<r;++a)s[a]=t[a];return new J(s,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&s!==r.nextSibling&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=_);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],u=a.length,c=i[o]=new Array(u),l=0;l<u;++l)(s=a[l])&&(c[l]=s);c.sort(t)}return new J(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this},attr:function(e,t){var n=s(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):function(e,t){return e.style.getPropertyValue(t)||b(e).getComputedStyle(e,null).getPropertyValue(t)}(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=x(e+"");if(arguments.length<2){for(var r=E(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?j:A)(this,e)}}:t?function(e){return function(){j(this,e)}}:function(e){return function(){A(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?k:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?O:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(N)},lower:function(){return this.each(T)},append:function(e){var t="function"==typeof e?e:a(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:a(e),r=null==t?$:"function"==typeof t?t:c(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(C)},clone:function(e){return this.select(e?R:I)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?D:z,null==n&&(n=!1),r=0;r<s;++r)this.each(a(o[r],t,n));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(r=0,u=a[c];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return q(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return q(this,e,t)}})(e,t))}};var H=/("(?:[^\\"]|\\.)*")|[:,\][}{]/g;function U(e,t,n){return t in e?e[t]:n}var X=function(e,t){t=t||{};var n=JSON.stringify([1],null,U(t,"indent",2)).slice(2,-3),r=U(t,"margins",!1),i=""===n?1/0:U(t,"maxLength",80);return function e(t,o,s){t&&"function"==typeof t.toJSON&&(t=t.toJSON());var a=JSON.stringify(t);if(void 0===a)return a;var u=i-o.length-s;if(a.length<=u){var c=function(e,t){var n=t?" ":"",r={"{":"{"+n,"[":"["+n,"}":n+"}","]":n+"]",",":", ",":":": "};return e.replace(H,function(e,t){return t?e:r[e]})}(a,r);if(c.length<=u)return c}if("object"==typeof t&&null!==t){var l,h=o+n,f=[],p=function(e,t){return t===e.length-1?0:1};if(Array.isArray(t)){for(var v=0;v<t.length;v++)f.push(e(t[v],h,p(t,v))||"null");l="[]"}else Object.keys(t).forEach(function(n,r,i){var o=JSON.stringify(n)+": ",s=e(t[n],h,o.length+p(i,r));void 0!==s&&f.push(o+s)}),l="{}";if(f.length>0)return[l[0],n+f.join(",\n"+h),l[1]].join("\n"+o)}return a}(e,"",0)},G=Object.freeze({default:X,__moduleExports:X});function Y(e,t){return e(t={exports:{}},t.exports),t.exports}var Z,F=Y(function(e,t){var n;t=e.exports=G,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,u=a++;s[u]="0|[1-9]\\d*";var c=a++;s[c]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var h=a++;s[h]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=a++;s[f]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="(?:"+s[u]+"|"+s[l]+")";var v=a++;s[v]="(?:"+s[c]+"|"+s[l]+")";var d=a++;s[d]="(?:-("+s[p]+"(?:\\."+s[p]+")*))";var m=a++;s[m]="(?:-?("+s[v]+"(?:\\."+s[v]+")*))";var g=a++;s[g]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[g]+"(?:\\."+s[g]+")*))";var w=a++,_="v?"+s[h]+s[d]+"?"+s[y]+"?";s[w]="^"+_+"$";var b="[v=\\s]*"+s[f]+s[m]+"?"+s[y]+"?",x=a++;s[x]="^"+b+"$";var E=a++;s[E]="((?:<|>)?=?)";var S=a++;s[S]=s[c]+"|x|X|\\*";var j=a++;s[j]=s[u]+"|x|X|\\*";var A=a++;s[A]="[v=\\s]*("+s[j]+")(?:\\.("+s[j]+")(?:\\.("+s[j]+")(?:"+s[d]+")?"+s[y]+"?)?)?";var k=a++;s[k]="[v=\\s]*("+s[S]+")(?:\\.("+s[S]+")(?:\\.("+s[S]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var O=a++;s[O]="^"+s[E]+"\\s*"+s[A]+"$";var N=a++;s[N]="^"+s[E]+"\\s*"+s[k]+"$";var T=a++;s[T]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var $=a++;s[$]="(?:~>?)";var C=a++;s[C]="(\\s*)"+s[$]+"\\s+",o[C]=new RegExp(s[C],"g");var I=a++;s[I]="^"+s[$]+s[A]+"$";var R=a++;s[R]="^"+s[$]+s[k]+"$";var L=a++;s[L]="(?:\\^)";var M=a++;s[M]="(\\s*)"+s[L]+"\\s+",o[M]=new RegExp(s[M],"g");var V=a++;s[V]="^"+s[L]+s[A]+"$";var P=a++;s[P]="^"+s[L]+s[k]+"$";var z=a++;s[z]="^"+s[E]+"\\s*("+b+")$|^$";var D=a++;s[D]="^"+s[E]+"\\s*("+_+")$|^$";var q=a++;s[q]="(\\s*)"+s[E]+"\\s*("+b+"|"+s[A]+")",o[q]=new RegExp(s[q],"g");var B=a++;s[B]="^\\s*("+s[A]+")\\s+-\\s+("+s[A]+")\\s*$";var J=a++;s[J]="^\\s*("+s[k]+")\\s+-\\s+("+s[k]+")\\s*$";var H=a++;s[H]="(<|>)?=?\\s*\\*";for(var U=0;U<a;U++)n(U,s[U]),o[U]||(o[U]=new RegExp(s[U]));function X(e,t){if(e instanceof G)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t?o[x]:o[w]).test(e))return null;try{return new G(e,t)}catch(e){return null}}function G(e,t){if(e instanceof G){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof G))return new G(e,t);n("SemVer",e,t),this.loose=t;var s=e.trim().match(t?o[x]:o[w]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=X,t.valid=function(e,t){var n=X(e,t);return n?n.version:null},t.clean=function(e,t){var n=X(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=G,G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},G.prototype.toString=function(){return this.version},G.prototype.compare=function(e){return n("SemVer.compare",this.version,this.loose,e),e instanceof G||(e=new G(e,this.loose)),this.compareMain(e)||this.comparePre(e)},G.prototype.compareMain=function(e){return e instanceof G||(e=new G(e,this.loose)),Z(this.major,e.major)||Z(this.minor,e.minor)||Z(this.patch,e.patch)},G.prototype.comparePre=function(e){if(e instanceof G||(e=new G(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return Z(r,i)}while(++t)},G.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new G(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Q(e,t))return null;var n=X(e),r=X(t);if(n.prerelease.length||r.prerelease.length){for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return"pre"+i;return"prerelease"}for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return i},t.compareIdentifiers=Z;var Y=/^[0-9]+$/;function Z(e,t){var n=Y.test(e),r=Y.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}function F(e,t,n){return new G(e,n).compare(new G(t,n))}function W(e,t,n){return F(e,t,n)>0}function K(e,t,n){return F(e,t,n)<0}function Q(e,t,n){return 0===F(e,t,n)}function ee(e,t,n){return 0!==F(e,t,n)}function te(e,t,n){return F(e,t,n)>=0}function ne(e,t,n){return F(e,t,n)<=0}function re(e,t,n,r){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e!==n;break;case"":case"=":case"==":i=Q(e,n,r);break;case"!=":i=ee(e,n,r);break;case">":i=W(e,n,r);break;case">=":i=te(e,n,r);break;case"<":i=K(e,n,r);break;case"<=":i=ne(e,n,r);break;default:throw new TypeError("Invalid operator: "+t)}return i}function ie(e,t){if(e instanceof ie){if(e.loose===t)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.loose=t,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return Z(t,e)},t.major=function(e,t){return new G(e,t).major},t.minor=function(e,t){return new G(e,t).minor},t.patch=function(e,t){return new G(e,t).patch},t.compare=F,t.compareLoose=function(e,t){return F(e,t,!0)},t.rcompare=function(e,t,n){return F(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=W,t.lt=K,t.eq=Q,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=ie;var oe={};function se(e,t){if(e instanceof se)return e.loose===t?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,n,r,i,o,s,a,u,c,l,h,f){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(u)?"":ae(c)?"<"+(+u+1)+".0.0":ae(l)?"<"+u+"."+(+c+1)+".0":h?"<="+u+"."+c+"."+l+"-"+h:"<="+a)).trim()}function ce(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(r=0;r<e.length;r++)if(n(e[r].semver),e[r].semver!==oe&&e[r].semver.prerelease.length>0){var i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function he(e,t,n,r){var i,o,s,a,u;switch(e=new G(e,r),t=new se(t,r),n){case">":i=W,o=ne,s=K,a=">",u=">=";break;case"<":i=K,o=te,s=W,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=null,h=null;if(t.set[c].forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),l=l||e,h=h||e,i(e.semver,l.semver,r)?l=e:s(e.semver,h.semver,r)&&(h=e)}),l.operator===a||l.operator===u)return!1;if((!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===u&&s(e,h.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.loose?o[z]:o[D],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new G(n[2],this.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.loose),this.semver===oe||("string"==typeof e&&(e=new G(e,this.loose)),re(e,this.operator,this.semver,this.loose))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||u},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),n("range",e,t);var r=t?o[J]:o[B];e=e.replace(r,ue),n("hyphen replace",e),e=e.replace(o[q],"$1$2$3"),n("comparator trim",e,o[q]),e=(e=(e=e.replace(o[C],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[z]:o[D],s=e.split(" ").map(function(e){return function(e,t){return n("comp",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var r=t?o[P]:o[V];return e.replace(r,function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),"-"!==s.charAt(0)&&(s="-"+s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var r=t?o[R]:o[I];return e.replace(r,function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),"-"!==s.charAt(0)&&(s="-"+s),a=">="+r+"."+i+"."+o+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var r=t?o[N]:o[O];return e.replace(r,function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var u=ae(i),c=u||ae(o),l=c||ae(s),h=l;return"="===r&&h&&(r=""),u?t=">"===r||"<"===r?"<0.0.0":"*":r&&h?(c&&(o=0),l&&(s=0),">"===r?(r=">=",c?(i=+i+1,o=0,s=0):l&&(o=+o+1,s=0)):"<="===r&&(r="<",c?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[H],"")}(e,t),n("stars",e),e}(e,t)}).join(" ").split(/\s+/);return this.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new ie(e,t)})},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new G(e,this.loose));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new G(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new G(r=e,n)))}),r},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return he(e,t,"<",n)},t.gtr=function(e,t,n){return he(e,t,">",n)},t.outside=he,t.prerelease=function(e,t){var n=X(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof G)return e;if("string"!=typeof e)return null;var t=e.match(o[T]);return null==t?null:X((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),W=(F.SEMVER_SPEC_VERSION,F.re,F.src,F.parse,F.valid,F.clean,F.SemVer,F.inc,F.diff,F.compareIdentifiers,F.rcompareIdentifiers,F.major,F.minor,F.patch,F.compare,F.compareLoose,F.rcompare,F.sort,F.rsort,F.gt,F.lt,F.eq,F.neq,F.gte,F.lte,F.cmp,F.Comparator,F.Range,F.toComparators,F.satisfies),K=(F.maxSatisfying,F.minSatisfying,F.validRange,F.ltr,F.gtr,F.outside,F.prerelease,F.intersects,F.coerce,Y(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}})),Q=(Z=K)&&Z.__esModule&&Object.prototype.hasOwnProperty.call(Z,"default")?Z.default:Z,ee={offsetX:10,offsetY:10,id:"vg-tooltip-element",styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:te};function te(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function ne(e,t,n){return e.fields=t||[],e.fname=n,e}function re(e){throw Error(e)}var ie=Array.isArray;function oe(e){return e===Object(e)}function se(e){return"string"==typeof e}function ae(e){return ie(e)?"["+e.map(ae)+"]":oe(e)||se(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var ue=[],ce=(function(e,t){var n=function(e){var t,n,r,i=[],o=null,s=0,a=e.length,u="";function c(){i.push(u+e.substring(t,n)),u="",t=n+1}for(e+="",t=n=0;n<a;++n)if("\\"===(r=e[n]))u+=e.substring(t,n),t=++n;else if(r===o)c(),o=null,s=-1;else{if(o)continue;t===s&&'"'===r?(t=n+1,o=r):t===s&&"'"===r?(t=n+1,o=r):"."!==r||s?"["===r?(n>t&&c(),s=t=n+1):"]"===r&&(s||re("Access path missing open bracket: "+e),s>0&&c(),s=0,t=n+1):n>t?c():t=n+1}return s&&re("Access path missing closing bracket: "+e),o&&re("Access path missing closing quote: "+e),n>t&&(n++,c()),i}(e),r="return _["+n.map(ae).join("][")+"];";ne(Function("_",r),[e=1===n.length?n[0]:e],t||e)}("id"),ne(function(e){return e},ue,"identity"),ne(function(){return 0},ue,"zero"),ne(function(){return 1},ue,"one"),ne(function(){return!0},ue,"true"),ne(function(){return!1},ue,"false"),Y(function(e,t){function n(e,t){var n=[],r=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"}),function(i,o){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this),~s?r.splice(s,1/0,i):r.push(i),~n.indexOf(o)&&(o=t.call(this,i,o))}else n.push(o);return null==e?o:e.call(this,i,o)}}(e.exports=function(e,t,r,i){return JSON.stringify(e,n(t,i),r)}).getSerialize=n})),le=ce.getSerialize,he=ce||Object.freeze({default:ce,__moduleExports:ce,getSerialize:le});function fe(e,t){if(ie(e))return"["+e.map(function(e){return t(se(e)?e:he(e))}).join(", ")+"]";if(oe(e)){var n="",r=e,i=r.title,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(r,["title"]);i&&(n+="<h2>"+t(i)+"</h2>"),n+="<table>";for(var s=0,a=Object.keys(o);s<a.length;s++){var u=a[s],c=o[u];oe(c)&&(c=he(c)),n+='<tr><td class="key">'+t(u)+':</td><td class="value">'+t(c)+"</td></tr>"}return n+="</table>"}return t(e)}var pe=function(){function e(e){this.options=n({},ee,e);var t=this.options.id;if(this.call=this.tooltip_handler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"\n#"+e+" {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0,0,0,0.1);\n\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#"+e+".visible {\n  visibility: visible;\n}\n#"+e+" h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#"+e+" table {\n  border-spacing: 0;\n}\n#"+e+" td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#"+e+" td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#"+e+" td.value {\n  max-width: 200px;\n  text-align: left;\n}\n\n/* Dark and light color themes */\n#"+e+".dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#"+e+".dark-theme td.key {\n  color: #bfbfbf;\n}\n\n#"+e+".light-theme {\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#"+e+".light-theme td.key {\n  color: #808080;\n}\n"}(t),document.head.childNodes.length>0?document.head.insertBefore(r,document.head.childNodes[0]):document.head.appendChild(r)}this.el=document.getElementById(t),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",t),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return e.prototype.tooltip_handler=function(e,t,n,r){if(null!=r&&""!==r){this.el.innerHTML=fe(r,te),this.el.classList.add("visible",this.options.theme+"-theme");var i=function(e,t,n,r){var i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);var o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),o=i.x,s=i.y;this.el.setAttribute("style","top: "+s+"px; left: "+o+"px")}else this.el.classList.remove("visible",this.options.theme+"-theme")},e}();var ve=X||G,de=e,me=t,ge={vega:"Vega","vega-lite":"Vega-Lite"},ye={vega:de.version,"vega-lite":me?me.version:"not available"},we={vega:function(e,t){return e},"vega-lite":function(e,t){return me.compile(e,{config:t}).spec}};function _e(e,t,i){return o=this,s=void 0,u=function(){var o,s,a,u,c,l,h,f,p,v,d,m,g,y,w,_;return r(this,function(r){switch(r.label){case 0:return o=void 0===(i=i||{}).actions||i.actions,s=i.loader||de.loader(),a=i.renderer||"canvas",u=i.logLevel||de.Warn,de.isString(t)?[4,s.load(t)]:[3,2];case 1:return l=r.sent(),[2,_e(e,JSON.parse(l),i)];case 2:return c=i.config,de.isString(c)?[4,s.load(c)]:[3,4];case 3:return l=r.sent(),[2,_e(e,t,n({},i,{config:JSON.parse(l)}))];case 4:return t.$schema?(h=Q(t.$schema),i.mode&&i.mode!==h.library&&console.warn("The given visualization spec is written in "+ge[h.library]+", but mode argument sets "+ge[i.mode]+"."),f=h.library,W(ye[f],"^"+h.version.slice(1))||console.warn("The input spec uses "+f+" "+h.version+", but the current version of "+ge[f]+" is "+ye[f]+".")):f=i.mode||"vega",p=we[f](t,c),"vega-lite"===f&&p.$schema&&(h=Q(p.$schema),W(ye.vega,"^"+h.version.slice(1))||console.warn("The compiled spec uses Vega "+h.version+", but current version is "+ye.vega+".")),v=(x=e,"string"==typeof x?new J([[document.querySelector(x)]],[document.documentElement]):new J([[x]],B)).classed("vega-embed",!0).html(""),i.onBeforeParse&&(p=i.onBeforeParse(p)),d=de.parse(p,"vega-lite"===f?{}:c),m=new de.View(d,{loader:s,logLevel:u,renderer:a}).initialize(e),!1!==i.tooltip&&(g=void 0,b=i.tooltip,g="function"==typeof b?i.tooltip:new pe(!0===i.tooltip?{}:i.tooltip).call,m.tooltip(g)),(void 0===i.hover?"vega-lite"!==f:i.hover)&&m.hover(),i&&(i.width&&m.width(i.width),i.height&&m.height(i.height),i.padding&&m.padding(i.padding)),i.runAsync?[4,m.runAsync()]:[3,6];case 5:return r.sent(),[3,7];case 6:m.run(),r.label=7;case 7:return!1!==o&&(y=v.append("div").attr("class","vega-actions"),!0!==o&&!1===o.export||(w="canvas"===a?"png":"svg",y.append("a").text("Export as "+w.toUpperCase()).attr("href","#").attr("target","_blank").attr("download","visualization."+w).on("mousedown",function(){var e=this;m.toImageURL(w).then(function(t){e.href=t}).catch(function(e){throw e}),M.preventDefault()})),!0!==o&&!1===o.source||y.append("a").text("View Source").attr("href","#").on("click",function(){var e,n,r,o,s,a;e=ve(t),n=i.sourceHeader||"",r=i.sourceFooter||"",o="<html><head>"+n+'</head><body><pre><code class="json">',s="</code></pre>"+r+"</body></html>",(a=window.open("")).document.write(o+e+s),a.document.title="Vega JSON Source",M.preventDefault()}),!0!==o&&!1===o.editor||(_=i.editorUrl||"https://vega.github.io/editor/",y.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){!function(e,t,n){var r=e.open(t),i=250,o=~~(1e4/i);e.addEventListener("message",function t(n){n.source===r&&(o=0,e.removeEventListener("message",t,!1))},!1),setTimeout(function e(){o<=0||(r.postMessage(n,"*"),setTimeout(e,i),o-=1)},i)}(window,_,{config:c||null,mode:f,renderer:a,spec:ve(t)}),M.preventDefault()}))),[2,{view:m,spec:t}]}var b,x})},new((a=void 0)||(a=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,s||[])).next())});var o,s,a,u}return _e.vl=me,_e.vega=de,_e.default=_e,_e});
